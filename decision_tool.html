<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ChurnScope | Decision Tool</title>

  <!-- Reuse your main site CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Small page-specific tweaks (kept minimal) -->
  <style>
    .tool-header {
      margin-top: 1.25rem;
    }
    /* Nav spacing just for this page */
    header nav {
    margin-top: 1.4rem;
    display: flex;
    flex-wrap: wrap;
    gap: 1.35rem;       /* bigger spacing */
    }

    header nav a {
    padding-bottom: 0.18rem;
    letter-spacing: 0.01em;
    }

    .tool-layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
      margin-top: 1.25rem;
    }

    @media (min-width: 980px) {
      .tool-layout {
        grid-template-columns: 0.95fr 1.05fr;
        align-items: start;
      }
    }

    .panel {
      background: var(--surface, #F2F0EF);
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 16px;
      padding: 1.25rem;
    }

    .panel h3 {
      margin-bottom: 0.75rem;
      font-size: 1.1rem;
      letter-spacing: -0.01em;
    }

    .form-grid {
      display: grid;
      gap: 0.9rem;
    }

    .field {
      display: grid;
      gap: 0.35rem;
    }

    .field label {
      font-size: 0.92rem;
      color: rgba(0,0,0,0.75);
    }

    .field input[type="number"],
    .field input[type="text"] {
      width: 100%;
      padding: 0.65rem 0.7rem;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,0.12);
      background: rgba(255,255,255,0.75);
      outline: none;
    }

    .field input[type="range"] {
      width: 100%;
    }

    .hint {
      font-size: 0.9rem;
      color: rgba(0,0,0,0.62);
      line-height: 1.35;
    }

    .kpi-grid {
      display: grid;
      gap: 0.75rem;
      grid-template-columns: 1fr 1fr;
    }

    @media (min-width: 520px) {
      .kpi-grid {
        grid-template-columns: 1fr 1fr 1fr 1fr;
      }
    }

    .kpi {
      padding: 0.9rem;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,0.08);
      background: rgba(255,255,255,0.65);
    }

    .kpi .label {
      font-size: 0.85rem;
      color: rgba(0,0,0,0.65);
      margin-bottom: 0.25rem;
    }

    .kpi .value {
      font-size: 1.15rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .mono {
      font-variant-numeric: tabular-nums;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    }

    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      margin-top: 0.9rem;
    }

    .linklike {
      display: inline-block;
      text-decoration: none;
      color: var(--accent, #2D68C4);
      border-bottom: 1px solid rgba(45,104,196,0.35);
      padding-bottom: 2px;
    }

    .linklike:hover {
      border-bottom-color: rgba(45,104,196,0.75);
    }

    .table-wrap {
      margin-top: 1rem;
      overflow: auto;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,0.08);
      background: rgba(255,255,255,0.65);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 520px;
    }

    th, td {
      padding: 0.7rem 0.8rem;
      border-bottom: 1px solid rgba(0,0,0,0.06);
      text-align: left;
      font-size: 0.92rem;
    }

    th {
      font-weight: 700;
      background: rgba(255,255,255,0.7);
      position: sticky;
      top: 0;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.25rem 0.55rem;
      border-radius: 999px;
      font-size: 0.84rem;
      border: 1px solid rgba(0,0,0,0.10);
      background: rgba(255,255,255,0.65);
      color: rgba(0,0,0,0.72);
    }
  </style>
</head>

<body>
    <header class="site-header container">
    <h1>ChurnScope</h1>
    <nav class="site-nav">
        <a href="index.html">Home</a>
        <a href="#tool">Decision</a>
        <a href="#about">Method</a>
    </nav>
    </header>


  <main id="tool">
    <section>
      <h2>Decision Tool</h2>
      <p class="hint">
        This simulator ranks customers by predicted churn risk and estimates <span class="mono">incremental ROI</span> for contacting the top N customers.
        You can adjust costs and campaign effectiveness to explore operational tradeoffs.
      </p>

      <div class="tool-layout">
        <!-- LEFT: Controls -->
        <div class="panel">
          <h3>Inputs</h3>

          <div class="form-grid">
            <div class="field">
              <label for="maxContacts">Outreach capacity (max contacts)</label>
              <input id="maxContacts" type="range" min="100" max="5000" step="100" value="1000" />
              <div class="hint">
                Selected: <span class="mono" id="maxContactsLabel">1000</span>
                <span id="dataCountLabel" class="badge" style="margin-left:0.5rem;">Loading data…</span>
              </div>
            </div>

            <div class="field">
              <label for="contactCost">Contact cost ($ per customer)</label>
              <input id="contactCost" type="number" min="0" step="1" value="20" />
            </div>

            <div class="field">
              <label for="churnLoss">Churn loss ($ value if churn happens)</label>
              <input id="churnLoss" type="number" min="0" step="10" value="200" />
              <div class="hint">Think “LTV at risk” or “expected revenue saved if retained.”</div>
            </div>

            <div class="field">
              <label for="saveRate">Save rate (campaign effectiveness)</label>
              <input id="saveRate" type="number" min="0" max="1" step="0.01" value="0.25" />
              <div class="hint">Probability that contacting a true churner prevents churn (0–1).</div>
            </div>
          </div>

          <div class="actions">
            <a class="linklike" href="#" id="downloadBtn">Download contact list (CSV)</a>
            <a class="linklike" href="data/churn_scores.csv" target="_blank" rel="noopener">View data file</a>
          </div>

          <p class="hint" style="margin-top:0.9rem;">
            Profit model (incremental): <span class="mono">TP × (save_rate × churn_loss) − contacts × contact_cost</span>.
            If the CSV includes <span class="mono">actual_churn</span>, the tool will also estimate precision/recall.
          </p>
        </div>

        <!-- RIGHT: Outputs -->
        <div class="panel">
          <h3>Outputs</h3>

          <div class="kpi-grid">
            <div class="kpi">
              <div class="label">Estimated profit</div>
              <div class="value mono" id="profitValue">—</div>
            </div>

            <div class="kpi">
              <div class="label">Contacts</div>
              <div class="value mono" id="contactsValue">—</div>
            </div>

            <div class="kpi">
              <div class="label">Precision</div>
              <div class="value mono" id="precisionValue">—</div>
            </div>

            <div class="kpi">
              <div class="label">Recall</div>
              <div class="value mono" id="recallValue">—</div>
            </div>
          </div>

          <div class="table-wrap" aria-label="Top targets preview">
            <table>
              <thead>
                <tr>
                  <th>Customer</th>
                  <th>Churn probability</th>
                  <th>Contact?</th>
                  <th>Actual churn</th>
                </tr>
              </thead>
              <tbody id="targetsTbody">
                <tr><td colspan="4">Loading…</td></tr>
              </tbody>
            </table>
          </div>

          <p class="hint" style="margin-top:0.8rem;">
            Preview shows top 25 by risk. Download contains the full top-N list.
          </p>
        </div>
      </div>
    </section>

    <section id="about">
  <h2>Method</h2>

  <p class="hint">
    ChurnScope is a small decision-support demo built around a churn risk model.
    The goal is not just “predict churn,” but to turn predictions into an operational policy:
    <em>who should we contact when outreach capacity is limited?</em>
  </p>

  <div class="tool-layout" style="margin-top: 1rem;">
    <div class="panel">
      <h3>1) Model (offline)</h3>
      <p class="hint">
        I trained a RandomForest churn model in Python and used it to generate a scored hold-out test set.
        Each customer receives a <span class="mono">churn_probability</span> between 0 and 1.
        The web demo loads a static CSV of these scores so it can run on GitHub Pages with no backend.
      </p>
      <p class="hint" style="margin-top:0.6rem;">
        Why RandomForest? It’s a strong baseline for mixed tabular features and works well without deep feature engineering.
        (This project can later be extended with calibrated probabilities, gradient boosting, and richer feature work.)
      </p>
    </div>

    <div class="panel">
      <h3>2) Policy (online)</h3>
      <p class="hint">
        The decision rule is capacity-based targeting:
        sort customers by churn probability (highest to lowest), then contact the top N customers where
        <span class="mono">N = outreach capacity</span>.
      </p>
      <p class="hint" style="margin-top:0.6rem;">
        This mirrors a real retention workflow: a team has limited budget/time, so the model is used primarily as a ranking tool.
        The tool previews the top targets and lets you export the contact list as a CSV.
      </p>
    </div>

    <div class="panel">
      <h3>3) Economics (decision support)</h3>
      <p class="hint">
        Predictions only matter if the intervention is worth it. The simulator uses an incremental ROI model:
      </p>
      <p class="hint mono" style="margin-top:0.5rem;">
        profit = TP × (save_rate × churn_loss) − contacts × contact_cost
      </p>
      <p class="hint" style="margin-top:0.6rem;">
        This is incremental value relative to “do nothing.” We don’t penalize customers we didn’t contact;
        instead, we estimate how much value we recover by saving a fraction of true churners through outreach.
      </p>
    </div>

    <div class="panel">
      <h3>4) What to look for</h3>
      <ul class="hint" style="margin-top:0.5rem; padding-left: 1.05rem;">
        <li><span class="mono">Capacity</span>: low N favors precision; high N increases coverage but adds cost.</li>
        <li><span class="mono">Contact cost</span>: phone calls vs. emails can completely change ROI.</li>
        <li><span class="mono">Save rate</span>: campaign effectiveness determines whether targeting pays off.</li>
        <li><span class="mono">Churn loss</span>: higher LTV at risk increases the value of saving churners.</li>
      </ul>
      <p class="hint" style="margin-top:0.6rem;">
        A good outcome is a clear “operating point” (a capacity or threshold) where profit is maximized and the policy is practical.
      </p>
    </div>
  </div>



  </main>

  <footer>
    <p>© 2026 Ella Bourassa</p>
  </footer>

  <script src="decision_tool.js"></script>
</body>
</html>
